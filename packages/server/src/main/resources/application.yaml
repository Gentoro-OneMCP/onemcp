handbook:
  location: ${env:HANDBOOK_DIR:-classpath:acme-handbook}

prompt:
  location: classpath:prompts

# Logging levels can be configured here and applied at startup by OneMcp
logging:
  # Log file location; defaults to logs/onemcp.log
  dir: logs
  level:
    root: INFO
    # Fineâ€‘tune specific packages/classes as needed
    com:
      google:
        genai: OFF
      gentoro:
        onemcp: INFO
    org:
      eclipse:
        jetty: WARN
    okhttp3: INFO
    io:
      modelcontextprotocol: ALL

http:
  port: ${env:SERVER_PORT:-8080}
  hostname: 0.0.0.0
  acme:
    context-path: /acme
  mcp:
    endpoint: ${env:PROTOCOL_MCP_CONFIG_MESSAGE_ENDPOINT:-/mcp}
    keep-alive: -1
    keep-alive-seconds: -1
    disallow-delete: false
    server:
      name: "onemcp-server"
      version: "1.0.0"
    tool:
      name: onemcp.run
      description: |
        OneMCP entry point, express your request using Natural Language.


llm:
  active-profile: ${env:LLM_ACTIVE_PROFILE:-gemini}
  ollama:
    baseUrl: ${env:OLLAMA_BASE_URL:-http://192.168.2.77:11434}
    model: ${env:OLLAMA_MODEL_NAME:-qwen3-coder:30b}
    provider: ollama
  openai:
    apiKey: ${env:OPENAI_API_KEY:-sk-proj-...}
    model: ${env:OPENAI_MODEL_NAME:-gpt-5-nano-2025-08-07}
    provider: openai
  anthropic:
    apiKey: ${env:ANTHROPIC_API_KEY:-sk-ant-...}
    model: ${env:ANTHROPIC_MODEL_NAME:-claude-sonnet-4-5-20250929}
    provider: anthropic
  gemini:
    apiKey: ${env:GEMINI_API_KEY:-...}
    model: ${env:GEMINI_MODEL_NAME:-gemini-2.5-flash}
    provider: gemini
  cache:
    enabled: false

indexing:
  graph:
    # When true, the selected driver database/collection is cleared before re-indexing
    clearOnStartup: ${env:GRAPH_CLEAR_ON_STARTUP:-true}
    # Select the unified v2 GraphDriver backend.
    # Supported values: in-memory | arangodb | orientdb
    driver: ${env:GRAPH_DRIVER:-orientdb}

    # Document chunking configuration used by HandbookGraphService
    chunking:
      markdown:
        naiveExtraction: ${env:GRAPH_CHUNKING_MARKDOWN_NAIVE_EXTRACTION:-true}
        # Strategy for Markdown chunking (future use): heading | paragraph | sliding-window
        strategy: ${env:GRAPH_CHUNKING_MARKDOWN_STRATEGY:-paragraph}
        # Target tokens per chunk (approx; used by default MarkdownChunker)
        windowSizeTokens: ${env:GRAPH_MD_WINDOW_SIZE:-500}
        overlapTokens: ${env:GRAPH_MD_OVERLAP:-64}

    # Graph validation configuration
    validation:
      # Run validation automatically after indexing completes
      runAfterIndexing: ${env:GRAPH_VALIDATION_RUN_AFTER_INDEXING:-false}
      # Path to save validation report file (default: logs/graph-validation-report-{timestamp}.txt)
      # Set to empty string to disable file output
      reportPath: ${env:GRAPH_VALIDATION_REPORT_PATH:-}
      # Structural validation (deterministic, fast, always enabled if validation enabled)
      structural:
        enabled: ${env:GRAPH_VALIDATION_STRUCTURAL_ENABLED:-true}
      # Semantic validation using LLM (cost-aware, sampled)
      semantic:
        enabled: ${env:GRAPH_VALIDATION_SEMANTIC_ENABLED:-true}
        # Maximum number of documents to validate (sampling for cost control)
        maxSamples: ${env:GRAPH_VALIDATION_MAX_SAMPLES:-10}
        # Only run semantic validation if structural validation passes
        requireStructuralPass: ${env:GRAPH_VALIDATION_SEMANTIC_REQUIRE_STRUCTURAL:-true}

    # ArangoDB driver configuration
    arangodb:
      # Hostname/IP of ArangoDB server
      host: ${env:GRAPH_ARANGODB_HOST:-localhost}
      # TCP port
      port: ${env:GRAPH_ARANGODB_PORT:-8529}
      # Authentication
      user: ${env:GRAPH_ARANGODB_USER:-root}
      password: ${env:GRAPH_ARANGODB_PASSWORD:-test123}
      # Database name prefix; final DB name is <prefix><handbookName>
      databasePrefix: ${env:GRAPH_ARANGODB_DB_PREFIX:-onemcp-}

    # OrientDB embedded driver configuration
    orient:
      # Root directory where embedded OrientDB stores data
      rootDir: ${env:GRAPH_ORIENT_ROOT_DIR:-data/orient}
      # Database name prefix; final DB name defaults to <databasePrefix><handbookName> when 'database' not set
      databasePrefix: ${env:GRAPH_ORIENT_DB_PREFIX:-onemcp-}
      # Optional: Explicit database name override (useful for single DB setups)
      database: ${env:GRAPH_ORIENT_DATABASE:-}

  # Usage examples:
  # - In-memory (default): GRAPH_V2_DRIVER=in-memory
  # - ArangoDB: GRAPH_V2_DRIVER=arangodb GRAPH_V2_ARANGODB_PASSWORD=... (ensure server is running)
  # - Neo4j (embedded): GRAPH_V2_DRIVER=neo4j GRAPH_V2_NEO4J_ROOT_DIR=/path/to/data GRAPH_V2_NEO4J_DB_PREFIX=onemcp_
  # - OrientDB (embedded): GRAPH_V2_DRIVER=orientdb GRAPH_V2_ORIENT_ROOT_DIR=/path/to/orient GRAPH_V2_ORIENT_DB_PREFIX=onemcp-
